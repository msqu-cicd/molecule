FROM docker:dind

RUN apk update && \
    apk add --no-cache \
    python3 python3-dev py3-pip gcc git curl build-base bash \
    autoconf automake py3-cryptography linux-headers \
    musl-dev libffi-dev openssl-dev openssh \
    && pip3 --no-cache-dir install ansible molecule[docker] molecule-hetznercloud netaddr yamllint \
    && git clone https://github.com/kewlfft/ansible-aur.git ~/.ansible/plugins/modules/aur \
    && rm -rf !$/.git
